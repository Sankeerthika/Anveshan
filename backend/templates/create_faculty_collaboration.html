{% extends "base.html" %}

{% block content %}
<div style="max-width: 980px; margin: 40px auto; padding: 0 24px;">
    <div style="background: #fff; padding: 32px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.06); border: 1px solid #eef2f6;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 28px;">
            <div>
                <h2 style="margin: 0; color: #1f2937; font-size: 1.8rem; letter-spacing: -0.02em;">Create New Collaboration</h2>
                <div style="color: #6b7280; font-size: 0.95rem; margin-top: 6px;">Set up a professional collaboration with clear roles and requirements.</div>
            </div>
            <div style="display: flex; gap: 10px;">
                <a href="{{ url_for('collaboration.faculty_dashboard') }}" style="color: #64748b; text-decoration: none; padding: 10px 16px; border: 1px solid #e5e7eb; border-radius: 10px;">Cancel</a>
                <button form="create-collab-form" type="submit" class="btn-primary" style="padding: 10px 20px; border-radius: 10px;">Create</button>
            </div>
        </div>

        <form id="create-collab-form" action="{{ url_for('collaboration.create_faculty_collaboration') }}" method="POST" novalidate>
            <div style="display: grid; grid-template-columns: 1fr; gap: 24px;">
                <div class="row g-3">
                    <div class="col-12 col-md-6">
                        <label for="title" style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Title</label>
                        <input type="text" name="title" id="title" required aria-label="Collaboration title" placeholder="Concise, descriptive title" class="form-control"
                               style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
                    </div>
                    <div class="col-12 col-md-6">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Collaboration Type</label>
                        <div class="btn-group" role="group" aria-label="Collaboration type" style="display:flex; gap:10px;">
                            <input type="radio" class="btn-check" name="type" id="type_article" value="article" autocomplete="off" checked>
                            <label class="btn btn-outline-primary" for="type_article" style="flex:1;">Article Writing</label>
                            <input type="radio" class="btn-check" name="type" id="type_project" value="project" autocomplete="off">
                            <label class="btn btn-outline-primary" for="type_project" style="flex:1;">Research / Project</label>
                        </div>
                    </div>
                </div>

                <div>
                    <label for="description" style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Description & Goals</label>
                    <textarea name="description" id="description" rows="6" required aria-label="Description and goals" placeholder="Outline objectives, scope, expected outcomes, and timelines." class="form-control"
                              style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;"></textarea>
                </div>

                <div style="display: grid; grid-template-columns: 1fr; gap: 14px; background: #f9fafb; border: 1px solid #eef2f7; border-radius: 12px; padding: 18px;">
                    <div style="display:flex; justify-content: space-between; align-items: center;">
                        <div style="font-weight: 700; color: #111827;">Collaboration Audience</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">Choose visibility and application eligibility</div>
                    </div>
                    <div class="row g-3">
                        <label class="col-12 col-md-4" style="cursor: pointer; border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 6px;">
                                <input type="radio" name="audience" value="faculty_only" onclick="toggleFields('faculty')" checked aria-label="Audience faculty only"> Faculty Only
                            </div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Students cannot view or apply.</div>
                        </label>
                        <label class="col-12 col-md-4" style="cursor: pointer; border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 6px;">
                                <input type="radio" name="audience" value="students_only" onclick="toggleFields('students')" aria-label="Audience students only"> Students Only
                            </div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Mentorship or student‑led research.</div>
                        </label>
                        <label class="col-12 col-md-4" style="cursor: pointer; border: 1px solid #e5e7eb; border-radius: 10px; padding: 12px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 6px;">
                                <input type="radio" name="audience" value="both" onclick="toggleFields('both')" aria-label="Audience faculty and students"> Faculty + Students
                            </div>
                            <div style="color: #6b7280; font-size: 0.9rem;">Joint research team.</div>
                        </label>
                    </div>

                    <div id="student-limits" style="display:none; margin-top: 6px;">
                        <div class="row g-3">
                            <div class="col-12 col-md-4">
                                <label for="max_students" style="display:block; margin-bottom: 8px; font-weight:600; color:#374151;">Max Students</label>
                                <input type="number" name="max_students" id="max_students" min="0" value="0" class="form-control" aria-label="Maximum students"
                                       style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
                            </div>
                            <div class="col-12 col-md-8">
                                <label for="required_skills_must" style="display:block; margin-bottom: 8px; font-weight:600; color:#374151;">Must‑Have Skills</label>
                                <input type="text" name="required_skills_must" id="required_skills_must" placeholder="e.g. Python, AI" aria-label="Must-have skills"
                                       class="form-control" style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
                                <div style="color:#6b7280; font-size:0.85rem; margin-top:6px;">Comma‑separated skills required to be eligible.</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 10px;">
                            <div>
                                <label for="required_skills_nice" style="display:block; margin-bottom: 8px; font-weight:600; color:#374151;">Nice‑to‑Have Skills</label>
                                <input type="text" name="required_skills_nice" id="required_skills_nice" placeholder="e.g. Writing, UI/UX" aria-label="Nice-to-have skills"
                                       class="form-control" style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
                            </div>
                        </div>
                    </div>

                    <div id="faculty-limits" style="display:none; margin-top: 6px;">
                        <div class="row g-3">
                            <div class="col-12 col-md-4">
                                <label for="max_faculty" style="display:block; margin-bottom: 8px; font-weight:600; color:#374151;">Max Faculty</label>
                                <input type="number" name="max_faculty" id="max_faculty" min="0" value="0" class="form-control" aria-label="Maximum faculty"
                                       style="width: 100%; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
                            </div>
                            <label class="col-12 col-md-8" style="display:flex; align-items:center; gap:10px; cursor:pointer; color:#374151;">
                                <input type="checkbox" name="strict_visibility" style="width:18px; height:18px;" aria-label="Hide from non-matching faculty in listings">
                                <span>Hide from non‑matching faculty in listings</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div style="display:flex; justify-content:flex-end; gap:10px;">
                    <a href="{{ url_for('collaboration.faculty_dashboard') }}" style="color:#64748b; text-decoration:none; padding:10px 16px; border:1px solid #e5e7eb; border-radius:10px;">Cancel</a>
                    <button type="submit" class="btn-primary" style="padding:10px 20px; border-radius:10px;">Create Collaboration</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    function toggleFields(audience) {
        const studentSection = document.getElementById('student-limits');
        const facultySection = document.getElementById('faculty-limits');
        if (audience === 'faculty_only') {
            studentSection.style.display = 'none';
            facultySection.style.display = 'block';
        } else if (audience === 'students_only') {
            studentSection.style.display = 'block';
            facultySection.style.display = 'none';
        } else if (audience === 'both') {
            studentSection.style.display = 'block';
            facultySection.style.display = 'block';
        }
    }
    toggleFields('faculty_only');
</script>
{% endblock %}